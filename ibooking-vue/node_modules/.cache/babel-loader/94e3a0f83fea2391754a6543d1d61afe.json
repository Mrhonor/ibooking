{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport layout from '@/components/layout-page.vue';\nimport { getStuBook } from '@/api/request';\nexport default {\n  components: {\n    layout\n  },\n\n  data() {\n    return {\n      currentPage: 1,\n      pagesize: 10,\n      total: 10,\n      tableData: []\n    };\n  },\n\n  methods: {\n    handleCurrentChange(page) {\n      this.currentPage = page;\n      this.query();\n    },\n\n    query() {\n      const stuNum = 1;\n      getStuBook(stuNum).then(res => {\n        if (res) {\n          console.log(res);\n\n          if (!res.length) {\n            this.tableData = [res];\n          } else {\n            this.tableData = res;\n          }\n\n          this.tableData.day = this.tableData.start;\n          let h = new Date(this.tableData.start).getHours();\n          let m = new Date(this.tableData.start).getMinutes();\n          let s = new Date(this.tableData.start).getSeconds();\n          let start = h + ':' + m + ':' + s;\n          this.tableData.start = start;\n          let eh = new Date(this.tableData.end).getHours();\n          let em = new Date(this.tableData.end).getMinutes();\n          let es = new Date(this.tableData.end).getSeconds();\n          let end = eh + ':' + em + ':' + es;\n          this.tableData.end = end;\n          console.log(this.tableData);\n          this.total = res.length;\n        }\n      });\n    },\n\n    bookStu() {\n      bookingCheck(stuNum).then(res => {\n        if (res) {\n          this.$message.success('签到成功');\n        } else {\n          this.$message.success('已超过签退时间，签到失败！');\n        }\n      });\n    }\n\n  },\n\n  mounted() {\n    this.query();\n  }\n\n};","map":null,"metadata":{},"sourceType":"module"}