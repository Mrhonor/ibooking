{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport layout from '@/components/layout-page.vue';\nimport { getStuBook } from '@/api/request';\nexport default {\n  components: {\n    layout\n  },\n\n  data() {\n    return {\n      currentPage: 1,\n      pagesize: 10,\n      total: 10,\n      tableData: [{\n        \"id\": 1,\n        \"location\": \"A101\",\n        \"stuNum\": \"1\",\n        \"day\": \"2023-05-27\",\n        \"start\": \"2023-05-27 10:00:00\",\n        \"end\": \"2023-05-28 12:00:00\"\n      }]\n    };\n  },\n\n  methods: {\n    handleCurrentChange(page) {\n      this.currentPage = page;\n      this.query();\n    },\n\n    query() {\n      const stuNum = 1;\n      getStuBook(stuNum).then(res => {\n        if (res) {\n          this.tableData = res;\n          console.log(this.tableData);\n          this.tableData.day = this.tableData.start;\n          let h = new Date(this.tableData.start).getHours();\n          let m = new Date(this.tableData.start).getMinutes();\n          let s = new Date(this.tableData.start).getSeconds();\n          let start = h + ':' + m + ':' + s;\n          this.tableData.start = start;\n          h = new Date(this.tableData.end).getHours();\n          m = new Date(this.tableData.end).getMinutes();\n          s = new Date(this.tableData.end).getSeconds();\n          end = h + ':' + m + ':' + s;\n          this.tableData.end = end;\n          console.log(this.tableData);\n          this.total = res.length;\n        }\n      });\n    }\n\n  },\n\n  mounted() {\n    this.query();\n  }\n\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AAEA;EACAA;IACAC;EADA,CADA;;EAIAC;IACA;MACAC,cADA;MAEAC,YAFA;MAGAC,SAHA;MAIAC,YACA;QACA,OADA;QAEA,kBAFA;QAGA,aAHA;QAIA,mBAJA;QAKA,8BALA;QAMA;MANA,CADA;IAJA;EAeA,CApBA;;EAqBAC;IACAC;MACA;MACA;IACA,CAJA;;IAKAC;MACA;MACAC;QACA;UACA;UACAC;UACA;UACA;UACA;UACA;UACA;UACA;UAEAC;UACAC;UACAC;UACAC;UACA;UACAJ;UACA;QACA;MACA,CAnBA;IAoBA;;EA3BA,CArBA;;EAkDAK;IACA;EACA;;AApDA","names":["components","layout","data","currentPage","pagesize","total","tableData","methods","handleCurrentChange","query","getStuBook","console","h","m","s","end","mounted"],"sourceRoot":"src/views","sources":["account-management.vue"],"sourcesContent":["<template>\r\n    <layout>\r\n        <div>\r\n            <el-button type=\"primary\" @click=\"query\">查询</el-button>\r\n            <el-table :data=\"tableData\" border style=\"width: 100%\">\r\n                <el-table-column type=\"index\" label=\"序号\" align=\"center\" width=\"55px\"/>\r\n                <el-table-column prop=\"id\" label=\"学号\" align=\"center\" />\r\n                <el-table-column prop=\"location\" label=\"楼栋与教室\" align=\"center\"/>\r\n                <el-table-column prop=\"stuNum\" label=\"学生学号\" align=\"center\"/>\r\n                <el-table-column prop=\"day\" type=\"date\" label=\"预约日期\" align=\"center\"/>\r\n                <el-table-column prop=\"start\" type=\"datatime\" label=\"预约开始时间\" align=\"center\"/>\r\n                <el-table-column prop=\"end\" type=\"datatime\" label=\"预约结束时间\" align=\"center\"/>\r\n            </el-table>\r\n            <el-pagination\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"currentPage\"\r\n                :page-size=\"10\"\r\n                layout=\"total, prev, pager, next, jumper\"\r\n                :total=\"total\">\r\n            </el-pagination>\r\n        </div>\r\n    </layout>\r\n</template>\r\n<script>\r\nimport layout from '@/components/layout-page.vue'\r\nimport { getStuBook } from '@/api/request'\r\n\r\nexport default ({\r\n    components: {\r\n        layout\r\n    },\r\n    data() {\r\n      return {\r\n        currentPage: 1,\r\n        pagesize: 10,\r\n        total: 10,\r\n        tableData: [\r\n            {\r\n            \"id\": 1,\r\n            \"location\": \"A101\",\r\n            \"stuNum\": \"1\",\r\n            \"day\":\"2023-05-27\",\r\n            \"start\": \"2023-05-27 10:00:00\",\r\n            \"end\": \"2023-05-28 12:00:00\"\r\n        },\r\n        ],\r\n      }\r\n    },\r\n    methods: {\r\n        handleCurrentChange(page) {\r\n            this.currentPage = page\r\n            this.query()\r\n        },\r\n        query() {\r\n            const stuNum = 1\r\n            getStuBook(stuNum).then((res) => {\r\n                if(res) {\r\n                    this.tableData = res\r\n                    console.log(this.tableData)\r\n                    this.tableData.day = this.tableData.start\r\n                    let h =  new Date(this.tableData.start).getHours()\r\n                    let m = new Date(this.tableData.start).getMinutes()\r\n                    let s = new Date(this.tableData.start).getSeconds()\r\n                    let start = h+':'+m+':'+s\r\n                    this.tableData.start = start\r\n\r\n                    h =  new Date(this.tableData.end).getHours()\r\n                    m = new Date(this.tableData.end).getMinutes()\r\n                    s = new Date(this.tableData.end).getSeconds()\r\n                    end = h+':'+m+':'+s\r\n                    this.tableData.end = end\r\n                    console.log(this.tableData)\r\n                    this.total = res.length\r\n                } \r\n            })\r\n        },\r\n    },\r\n    mounted() {\r\n        this.query()\r\n    },\r\n})\r\n</script>\r\n<style scoped>\r\n.el-table {\r\n    margin-top: 15px;\r\n}\r\n.upload-demo {\r\n    display: inline-block;\r\n    margin-top: 15px;\r\n}\r\n.el-pagination {\r\n    margin-top: 15px;\r\n    float: right;\r\n}\r\n.el-select {\r\n    margin-left: 15px;\r\n    margin-right: 15px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}