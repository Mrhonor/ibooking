{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport layout from '@/components/layout-page.vue';\nimport { getSeat, delSeat, addSeat } from '@/api/request';\nexport default {\n  components: {\n    layout\n  },\n\n  data() {\n    return {\n      currentPage: 1,\n      pagesize: 10,\n      total: 10,\n      tableData: [],\n      Visible: false,\n      form: {\n        index: '',\n        stuRoomNumber: '',\n        buildingNumber: '',\n        classRoomNumber: '',\n        openStatus: '',\n        time: '',\n        returnTime: []\n      },\n      open: true\n    };\n  },\n\n  methods: {\n    handleCurrentChange(page) {\n      this.currentPage = page;\n      this.query();\n    },\n\n    query() {\n      let roomNum = this.$route.query.roomnum;\n      getSeat(roomNum).then(res => {\n        if (res) {\n          this.tableData = res;\n\n          for (let i in res) {\n            if (res[i].isVacant) {\n              this.tableData[i].isVacant = \"是\";\n              this.tableData[i].is_Vacant = 1;\n            } else {\n              this.tableData[i].isVacant = \"否\";\n              this.tableData[i].is_Vacant = 0;\n            }\n\n            if (res[i].hasOutlet) this.tableData[i].hasOutlet = \"是\";else this.tableData[i].hasOutlet = \"否\"; // console.log(this.tableData[i].openStatus)\n          } // this.is_Vacant = \n\n\n          this.total = res.length;\n        }\n      });\n    },\n\n    add() {},\n\n    deleteSeat(val) {\n      this.$confirm('确定要删除这个座位吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        delSeat(val.id).then(res => {\n          if (res) {\n            this.query();\n            this.$message.success('退预约成功');\n          } else {\n            this.$message.success('退预约失败');\n          }\n        });\n      }).catch(() => {\n        this.$message.info('已取消');\n      });\n    }\n\n  },\n\n  mounted() {\n    this.query();\n  }\n\n};","map":null,"metadata":{},"sourceType":"module"}