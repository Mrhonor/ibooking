{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport layout from '@/components/layout-page.vue';\nimport { getStudyRoom, getStudyRoomOpen, getStudyRoomId } from '@/api/request';\nexport default {\n  components: {\n    layout\n  },\n\n  data() {\n    return {\n      currentPage: 1,\n      pagesize: 10,\n      total: 10,\n      tableData: [],\n      active: 0,\n      input: '' // Visible: false,\n\n    };\n  },\n\n  methods: {\n    handleCurrentChange(page) {\n      this.currentPage = page;\n      this.query();\n    },\n\n    next() {\n      if (this.active++ > 3) this.active = 0;\n    },\n\n    query() {\n      getStudyRoom().then(res => {\n        if (res) {\n          this.tableData = res;\n          console.log(res.length);\n\n          for (let i in res) {\n            if (res[i].openStatus) {\n              this.tableData[i].open = 1;\n              this.tableData[i].openStatus = \"是\";\n            } else {\n              this.tableData[i].openStatus = \"否\";\n              this.tableData[i].open = 0;\n            } // console.log(this.tableData[i].openStatus)\n\n          }\n\n          this.total = res.length;\n        }\n      });\n    },\n\n    queryOpen() {\n      getStudyRoomOpen().then(res => {\n        if (res) {\n          this.tableData = res; // console.log(res)\n\n          for (let i in res) {\n            if (res[i].openStatus) {\n              this.tableData[i].open = 1;\n              this.tableData[i].openStatus = \"是\";\n            } else {\n              this.tableData[i].openStatus = \"否\";\n              this.tableData[i].open = 0;\n            } // console.log(this.tableData[i].openStatus)\n\n          }\n\n          this.total = res.length;\n        }\n      });\n    },\n\n    queryId() {\n      getStudyRoomId(this.input).then(res => {\n        if (res) {\n          this.tableData = res;\n\n          if (!res.length) {\n            for (let i in res) {\n              if (res[i].openStatus) {\n                this.tableData[i].open = 1;\n                this.tableData[i].openStatus = \"是\";\n              } else {\n                this.tableData[i].openStatus = \"否\";\n                this.tableData[i].open = 0;\n              } // console.log(this.tableData[i].openStatus)\n\n            }\n\n            this.total = res.length;\n          }\n        }\n      });\n    },\n\n    chooseRoom(val) {\n      this.$router.replace('/book/seat?roomnum=' + val.id + '&st=' + val.startTime + '&et=' + val.endTime);\n    }\n\n  },\n\n  mounted() {\n    this.query();\n  }\n\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AAEA;EACAA;IACAC;EADA,CADA;;EAIAC;IACA;MACAC,cADA;MAEAC,YAFA;MAGAC,SAHA;MAIAC,aAJA;MAKAC,SALA;MAMAC,SANA,CAOA;;IAPA;EASA,CAdA;;EAeAC;IACAC;MACA;MACA;IACA,CAJA;;IAKAC;MACA;IACA,CAPA;;IAQAC;MACAC;QACA;UACA;UACAC;;UACA;YACA;cACA;cACA;YACA,CAHA,MAIA;cACA;cACA;YACA,CARA,CASA;;UACA;;UACA;QACA;MACA,CAjBA;IAkBA,CA3BA;;IA4BAC;MACAC;QACA;UACA,qBADA,CAEA;;UACA;YACA;cACA;cACA;YACA,CAHA,MAIA;cACA;cACA;YACA,CARA,CASA;;UACA;;UACA;QACA;MACA,CAjBA;IAkBA,CA/CA;;IAgDAC;MACAC;QACA;UACA;;UACA;YACA;cACA;gBACA;gBACA;cACA,CAHA,MAIA;gBACA;gBACA;cACA,CARA,CASA;;YACA;;YACA;UACA;QACA;MACA,CAlBA;IAmBA,CApEA;;IAqEAC;MACA;IACA;;EAvEA,CAfA;;EAwFAC;IACA;EACA;;AA1FA","names":["components","layout","data","currentPage","pagesize","total","tableData","active","input","methods","handleCurrentChange","next","query","getStudyRoom","console","queryOpen","getStudyRoomOpen","queryId","getStudyRoomId","chooseRoom","mounted"],"sourceRoot":"src/views","sources":["book-chooseRoom.vue"],"sourcesContent":["<template>\r\n    <layout>\r\n        <div>\r\n            <el-steps :active=\"active\" finish-status=\"success\">\r\n                <el-step title=\"选择自习室\"></el-step>\r\n                <el-step title=\"选择座位\"></el-step>\r\n                <el-step title=\"选择时间\"></el-step>\r\n                <el-step title=\"预约\"></el-step>\r\n            </el-steps>\r\n            <!-- <el-button style=\"margin-top: 12px;\" @click=\"next\">下一步</el-button> -->\r\n            <el-row :gutter=\"-40\">\r\n                <el-button type=\"primary\" @click=\"queryOpen\" :disabled=true>开放中的自习室</el-button>\r\n                <el-button type=\"primary\" @click=\"query\" style=\"float:right\">所有自习室</el-button>\r\n                <el-input v-model=\"input\" placeholder=\"请输入自习室编号\"></el-input>\r\n                <el-button type=\"primary\" @click=\"queryId\" >查询</el-button>\r\n            </el-row>\r\n            <el-table :data=\"tableData\" border style=\"width: 100%\">\r\n                <el-table-column prop=\"id\" label=\"序号\" align=\"center\" width=\"55px\" />\r\n                <el-table-column prop=\"stuRoomNumber\" label=\"编号\" align=\"center\" />\r\n                <el-table-column prop=\"buildingNumber\" label=\"所处楼栋\" align=\"center\" />\r\n                <el-table-column prop=\"classRoomNumber\" label=\"所处教室\" align=\"center\"/>\r\n                <el-table-column prop=\"openStatus\" label=\"是否开放\" align=\"center\"/>\r\n                <el-table-column prop=\"startTime\" type=\"datatime\" label=\"开放时间\" align=\"center\"/>\r\n                <el-table-column prop=\"endTime\" type=\"datatime\" label=\"关闭时间\" align=\"center\"/>\r\n                <el-table-column\r\n                    fixed=\"right\"\r\n                    label=\"操作\"\r\n                    align=\"center\"\r\n                    width=\"100\">\r\n                    <template slot-scope=\"scope\">\r\n                        <!-- <el-button @click=\"chooseRoom(scope.row)\" type=\"text\" size=\"small\">选择</el-button> -->\r\n                        <el-button @click=\"chooseRoom(scope.row)\" type=\"text\" size=\"small\" :disabled=\"scope.row.open == 0 ? true:false\">选择</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n            <el-pagination\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"currentPage\"\r\n                :page-size=\"10\"\r\n                layout=\"total, prev, pager, next, jumper\"\r\n                :total=\"total\">\r\n            </el-pagination>\r\n            <!-- <el-dialog title=\"预约\" :visible.sync=\"Visible\" width=\"520px\">\r\n                <svg class=\"seat\" v-if=\"item.type===0\" fill=\"green\" viewBox=\"0 0 1024 1024\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\">\r\n                    <path style=\"pointer-events: none\"\r\n                            d=\"M782.873176 625.631535v-125.712101c0-26.354333-21.440885-47.795218-47.795218-47.795218H288.922042c-26.354333 0-47.795218 21.440885-47.795218 47.795218v125.712101c0 26.354333 21.440885 47.795218 47.795218 47.795218h446.155916c26.354333-0.002122 47.795218-21.440885 47.795218-47.795218zM687.053516 409.675423c9.550978-98.80381 26.884943-284.088547 30.125908-359.628296 0.534855-12.477823-4.130268-24.52479-13.135779-33.922953C694.229484 5.877035 680.437872 0 666.202669 0H359.437977c-14.23308 0-28.026816 5.877035-37.840976 16.122052-9.005511 9.398163-13.668511 21.44513-13.133657 33.922952 3.238843 75.539749 20.57493 260.822363 30.125908 359.628297h348.464264zM735.077958 715.873424h-105.111701l73.011924 292.04345a21.224396 21.224396 0 0 0 41.814183-5.146916V715.342814c-3.194272 0.343835-6.430992 0.53061-9.714406 0.53061zM288.922042 715.873424c-3.281292 0-6.520135-0.186775-9.714406-0.53061v287.427144a21.224396 21.224396 0 0 0 41.814183 5.146916l73.011924-292.04345h-105.111701z\"\r\n                    ></path>\r\n                </svg>\r\n            </el-dialog> -->\r\n        </div>\r\n    </layout>\r\n</template>\r\n<script>\r\nimport layout from '@/components/layout-page.vue'\r\nimport { getStudyRoom, getStudyRoomOpen,getStudyRoomId } from '@/api/request'\r\n\r\nexport default ({\r\n    components: {\r\n        layout\r\n    },\r\n    data() {\r\n      return {\r\n        currentPage: 1,\r\n        pagesize: 10,\r\n        total: 10,\r\n        tableData: [],\r\n        active: 0,\r\n        input:'',\r\n        // Visible: false,\r\n      }\r\n    },\r\n    methods: {\r\n        handleCurrentChange(page) {\r\n            this.currentPage = page\r\n            this.query()\r\n        },\r\n        next() {\r\n            if (this.active++ > 3) this.active = 0;\r\n        },\r\n        query() {\r\n            getStudyRoom().then((res) => {\r\n                if(res) {\r\n                    this.tableData = res\r\n                    console.log(res.length)\r\n                    for (let i in res) {\r\n                        if (res[i].openStatus) {\r\n                            this.tableData[i].open = 1\r\n                            this.tableData[i].openStatus = \"是\"\r\n                        }\r\n                        else {\r\n                            this.tableData[i].openStatus = \"否\"\r\n                            this.tableData[i].open = 0\r\n                        }\r\n                        // console.log(this.tableData[i].openStatus)\r\n                    }\r\n                    this.total = res.length\r\n                } \r\n            })\r\n        },\r\n        queryOpen(){\r\n            getStudyRoomOpen().then((res) => {\r\n                if(res) {\r\n                    this.tableData = res\r\n                    // console.log(res)\r\n                    for (let i in res) {\r\n                        if (res[i].openStatus) {\r\n                            this.tableData[i].open = 1\r\n                            this.tableData[i].openStatus = \"是\"\r\n                        }\r\n                        else {\r\n                            this.tableData[i].openStatus = \"否\"\r\n                            this.tableData[i].open = 0\r\n                        }\r\n                        // console.log(this.tableData[i].openStatus)\r\n                    }\r\n                    this.total = res.length\r\n                } \r\n            })\r\n        },\r\n        queryId(){\r\n            getStudyRoomId(this.input).then((res) => {\r\n                if(res) {\r\n                    this.tableData = res\r\n                    if(!res.length){\r\n                        for (let i in res) {\r\n                            if (res[i].openStatus) {\r\n                                this.tableData[i].open = 1\r\n                                this.tableData[i].openStatus = \"是\"\r\n                            }\r\n                            else {\r\n                                this.tableData[i].openStatus = \"否\"\r\n                                this.tableData[i].open = 0\r\n                            }\r\n                            // console.log(this.tableData[i].openStatus)\r\n                        }\r\n                        this.total = res.length\r\n                    }\r\n                } \r\n            })\r\n        },\r\n        chooseRoom(val){\r\n            this.$router.replace('/book/seat?roomnum='+val.id+'&st='+val.startTime+'&et='+val.endTime)\r\n        }\r\n    },\r\n    mounted() {\r\n        this.query()\r\n    },\r\n})\r\n</script>\r\n<style scoped>\r\n.el-table {\r\n    margin-top: 15px;\r\n}\r\n.el-pagination {\r\n    margin-top: 15px;\r\n    float: right;\r\n}\r\n.el-row {\r\n    margin-bottom: 20px;\r\n    &:last-child {\r\n      margin-bottom: 0;\r\n    }\r\n  }\r\n.el-col {\r\n    border-radius: 4px;\r\n}\r\n.item {\r\n  width: 32px;\r\n  height: 32px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}