{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport layout from '@/components/layout-page.vue';\nimport { getSeat } from '@/api/request';\nexport default {\n  components: {\n    layout\n  },\n\n  data() {\n    return {\n      currentPage: 1,\n      pagesize: 10,\n      total: 10,\n      tableData: [],\n      active: 1,\n      Visible: false,\n      form: {\n        index: '',\n        stuRoomNumber: '',\n        buildingNumber: '',\n        classRoomNumber: '',\n        openStatus: '',\n        time: '',\n        returnTime: []\n      },\n      open: true\n    };\n  },\n\n  methods: {\n    handleCurrentChange(page) {\n      this.currentPage = page;\n      this.query();\n    },\n\n    next() {\n      if (this.active++ > 3) this.active = 0;\n    },\n\n    query() {\n      let roomNum = this.$route.query.roomnum;\n      getSeat(roomNum).then(res => {\n        if (res) {\n          this.tableData = res;\n\n          for (let i in res) {\n            if (res[i].isVacant) {\n              this.tableData[i].isVacant = \"是\";\n              this.tableData[i].is_Vacant = 1;\n            } else {\n              this.tableData[i].isVacant = \"否\";\n              this.tableData[i].is_Vacant = 0;\n            }\n\n            if (res[i].hasOutlet) this.tableData[i].hasOutlet = \"是\";else this.tableData[i].hasOutlet = \"否\"; // console.log(this.tableData[i].openStatus)\n          } // this.is_Vacant = \n\n\n          this.total = res.length;\n        }\n      });\n    },\n\n    chooseSeat(val) {\n      let roomNum = this.$route.query.roomnum;\n      let st = this.$route.query.st;\n      let h = st.split(\":\")[0];\n      let m = st.split(\":\")[1];\n      let start = h + ':' + m;\n      let et = this.$route.query.et;\n      let eh = et.split(\":\")[0];\n      let em = et.split(\":\")[0];\n      let end = eh + ':' + em;\n      let bn = this.$route.query.bn;\n      let crn = this.$route.query.crn;\n      this.$router.replace('/book/seat/time?roomnum=' + roomNum + '&seatnum=' + val.seatNum + '&st=' + start + '&et=' + end + '&bn=' + bn + '&crn=' + crn);\n    }\n\n  },\n\n  mounted() {\n    this.query();\n  }\n\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AAEA;EACAA;IACAC;EADA,CADA;;EAIAC;IACA;MACAC,cADA;MAEAC,YAFA;MAGAC,SAHA;MAIAC,aAJA;MAKAC,SALA;MAMAC,cANA;MAOAC;QACAC,SADA;QAEAC,iBAFA;QAGAC,kBAHA;QAIAC,mBAJA;QAKAC,cALA;QAMAC,QANA;QAOAC;MAPA,CAPA;MAgBAC;IAhBA;EAmBA,CAxBA;;EAyBAC;IACAC;MACA;MACA;IACA,CAJA;;IAKAC;MACA;IACA,CAPA;;IAQAC;MACA;MACAC;QACA;UACA;;UACA;YACA;cACA;cACA;YACA,CAHA,MAIA;cACA;cACA;YACA;;YACA,6DACA,kCAVA,CAWA;UACA,CAdA,CAeA;;;UACA;QACA;MACA,CAnBA;IAoBA,CA9BA;;IA+BAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;;EA5CA,CAzBA;;EAuEAC;IACA;EACA;;AAzEA","names":["components","layout","data","currentPage","pagesize","total","tableData","active","Visible","form","index","stuRoomNumber","buildingNumber","classRoomNumber","openStatus","time","returnTime","open","methods","handleCurrentChange","next","query","getSeat","chooseSeat","mounted"],"sourceRoot":"src/views","sources":["book-chooseSeat.vue"],"sourcesContent":["<template>\r\n    <layout>\r\n        <div>\r\n            <el-steps :active=\"active\" finish-status=\"success\">\r\n                <el-step title=\"选择自习室\"></el-step>\r\n                <el-step title=\"选择座位\"></el-step>\r\n                <el-step title=\"选择时间\"></el-step>\r\n                <el-step title=\"预约\"></el-step>\r\n            </el-steps>\r\n            <el-table :data=\"tableData\" border style=\"width: 100%; margin-top: 20px;\">\r\n                <el-table-column type=\"index\" label=\"序号\" align=\"center\" width=\"55px\" />\r\n                <el-table-column prop=\"seatNum\" label=\"座位编号\" align=\"center\" />\r\n                <el-table-column prop=\"isVacant\" label=\"是否空闲\" align=\"center\" />\r\n                <el-table-column prop=\"hasOutlet\" label=\"是否有插座\" align=\"center\"/>\r\n                <el-table-column\r\n                    fixed=\"right\"\r\n                    label=\"操作\"\r\n                    align=\"center\"\r\n                    width=\"100\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button @click=\"chooseSeat(scope.row)\" type=\"text\" size=\"small\" :disabled=\"scope.row.is_Vacant == 0 ? true:false\">选择</el-button>\r\n                        <!-- <el-button @click=\"chooseSeat(scope.row)\" type=\"text\" size=\"small\" >选择</el-button> -->\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n            <el-pagination\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"currentPage\"\r\n                :page-size=\"10\"\r\n                layout=\"total, prev, pager, next, jumper\"\r\n                :total=\"total\">\r\n            </el-pagination>\r\n            \r\n        </div>\r\n    </layout>\r\n</template>\r\n<script>\r\nimport layout from '@/components/layout-page.vue'\r\nimport { getSeat } from '@/api/request'\r\n\r\nexport default ({\r\n    components: {\r\n        layout,\r\n    },\r\n    data() {\r\n      return {\r\n        currentPage: 1,\r\n        pagesize: 10,\r\n        total: 10,\r\n        tableData: [],\r\n        active: 1,\r\n        Visible: false,\r\n        form: {\r\n            index: '',\r\n            stuRoomNumber: '',\r\n            buildingNumber: '',\r\n            classRoomNumber: '',\r\n            openStatus: '',\r\n            time: '',\r\n            returnTime:[],\r\n        },\r\n        open: true,\r\n\r\n      }\r\n    },\r\n    methods: {\r\n        handleCurrentChange(page) {\r\n            this.currentPage = page\r\n            this.query()\r\n        },\r\n        next() {\r\n            if (this.active++ > 3) this.active = 0;\r\n        },\r\n        query() {\r\n            let roomNum = this.$route.query.roomnum\r\n            getSeat(roomNum).then((res) => {\r\n                if(res) {\r\n                    this.tableData = res\r\n                    for (let i in res) {\r\n                        if (res[i].isVacant) {\r\n                            this.tableData[i].isVacant = \"是\"\r\n                            this.tableData[i].is_Vacant = 1\r\n                        }                            \r\n                        else {\r\n                            this.tableData[i].isVacant = \"否\"\r\n                            this.tableData[i].is_Vacant = 0\r\n                        }\r\n                        if (res[i].hasOutlet) this.tableData[i].hasOutlet = \"是\"\r\n                        else this.tableData[i].hasOutlet = \"否\"\r\n                        // console.log(this.tableData[i].openStatus)\r\n                    }\r\n                    // this.is_Vacant = \r\n                    this.total = res.length\r\n                } \r\n            })\r\n        },\r\n        chooseSeat(val){\r\n            let roomNum = this.$route.query.roomnum\r\n            let st =this.$route.query.st\r\n            let h = st.split(\":\")[0]\r\n            let m = st.split(\":\")[1]\r\n            let start = h +':' + m\r\n            let et = this.$route.query.et\r\n            let eh = et.split(\":\")[0]\r\n            let em = et.split(\":\")[0]\r\n            let end = eh +':' + em\r\n            let bn = this.$route.query.bn\r\n            let crn = this.$route.query.crn\r\n            this.$router.replace('/book/seat/time?roomnum='+roomNum+'&seatnum='+val.seatNum+'&st='+start+'&et='+end+'&bn='+bn+'&crn='+crn)\r\n        },\r\n    },\r\n    mounted() {\r\n        this.query()\r\n    },\r\n})\r\n</script>\r\n<style scoped>\r\n.el-table {\r\n    margin-top: 15px;\r\n}\r\n.el-pagination {\r\n    margin-top: 15px;\r\n    float: right;\r\n}\r\n.item {\r\n  width: 32px;\r\n  height: 32px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}