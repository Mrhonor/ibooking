{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport layout from '@/components/layout-page.vue';\nimport { taskQuery, querytoday } from '@/api/request';\nexport default {\n  components: {\n    layout\n  },\n\n  data() {\n    return {\n      currentPage: 1,\n      pagesize: 10,\n      total: 10,\n      todayTaskNum: 0,\n      addVisible: false,\n      batchAddVisible: false,\n      form1: {\n        url: '',\n        type: '',\n        xcs: '',\n        cs: '',\n        jj: '否'\n      },\n      form2: {\n        name: '',\n        region: ''\n      },\n      tableData: []\n    };\n  },\n\n  methods: {\n    handleSizeChange() {},\n\n    handleCurrentChange(page) {\n      this.currentPage = page;\n      this.query();\n    },\n\n    query() {\n      const form = new FormData();\n      form.append('username_login', localStorage.getItem('username'));\n      form.append('password_login', localStorage.getItem('password'));\n      form.append('pagenum', this.currentPage);\n      form.append('pagesize', this.pagesize);\n      taskQuery(form).then(res => {\n        if (res && res.ok === 1) {\n          this.tableData = res.data.data.map(item => {\n            item.isTop = item.isTop === true ? '是' : '否';\n            item.isCanceled = item.isCanceled === true ? '是' : '否';\n            return item;\n          });\n          this.total = res.data.total;\n        }\n      });\n    },\n\n    queryToday() {\n      const form = new FormData();\n      form.append('username_login', localStorage.getItem('username'));\n      form.append('password_login', localStorage.getItem('password'));\n      querytoday(form).then(res => {\n        if (res && res.ok === 1) {\n          this.todayTaskNum = res.data;\n        }\n      });\n    },\n\n    add() {\n      this.addVisible = true;\n    },\n\n    batchAdd() {\n      this.batchAddVisible = true;\n    },\n\n    cancelClick(row) {\n      const form = new FormData();\n      form.append('username_login', localStorage.getItem('username'));\n      form.append('password_login', localStorage.getItem('password'));\n      form.append('missionid', row.missionid);\n      querytoday(form).then(res => {\n        if (res && res.ok === 1) {\n          console.log(res);\n        }\n      });\n    },\n\n    sure1() {},\n\n    sure2() {}\n\n  },\n\n  mounted() {\n    this.query();\n    this.queryToday();\n  }\n\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;AAEA;EACAA;IACAC;EADA,CADA;;EAIAC;IACA;MACAC,cADA;MAEAC,YAFA;MAGAC,SAHA;MAIAC,eAJA;MAKAC,iBALA;MAMAC,sBANA;MAOAC;QACAC,OADA;QAEAC,QAFA;QAGAC,OAHA;QAIAC,MAJA;QAKAC;MALA,CAPA;MAcAC;QACAC,QADA;QAEAC;MAFA,CAdA;MAkBAC;IAlBA;EAoBA,CAzBA;;EA0BAC;IACAC,qBADA;;IAEAC;MACA;MACA;IACA,CALA;;IAMAC;MACA;MACAC;MACAA;MACAA;MACAA;MACAC;QACA;UACA;YACAC;YACAA;YACA;UACA,CAJA;UAKA;QACA;MACA,CATA;IAUA,CAtBA;;IAuBAC;MACA;MACAH;MACAA;MACAI;QACA;UACA;QACA;MACA,CAJA;IAKA,CAhCA;;IAiCAC;MACA;IACA,CAnCA;;IAoCAC;MACA;IACA,CAtCA;;IAuCAC;MACA;MACAP;MACAA;MACAA;MACAI;QACA;UACAI;QACA;MACA,CAJA;IAKA,CAjDA;;IAkDAC,UAlDA;;IAmDAC;;EAnDA,CA1BA;;EA+EAC;IACA;IACA;EACA;;AAlFA","names":["components","layout","data","currentPage","pagesize","total","todayTaskNum","addVisible","batchAddVisible","form1","url","type","xcs","cs","jj","form2","name","region","tableData","methods","handleSizeChange","handleCurrentChange","query","form","taskQuery","item","queryToday","querytoday","add","batchAdd","cancelClick","console","sure1","sure2","mounted"],"sourceRoot":"src/views","sources":["task-management.vue"],"sourcesContent":["<template>\r\n    <layout>\r\n        <div>\r\n            <el-button type=\"primary\" @click=\"query\">查询任务</el-button>\r\n            <el-button type=\"primary\" @click=\"add\">添加任务</el-button>\r\n            <el-button type=\"primary\" @click=\"batchAdd\">批量添加任务</el-button>\r\n            今日完成任务数： {{ todayTaskNum }}\r\n            <el-table :data=\"tableData\" border style=\"width: 100%\">\r\n                <el-table-column type=\"index\" label=\"序号\" align=\"center\" width=\"55px\" />\r\n                <el-table-column prop=\"missiontype\" label=\"任务类型\" align=\"center\" />\r\n                <el-table-column prop=\"missionstatus\" label=\"任务状态\" align=\"center\"/>\r\n                <el-table-column prop=\"subNum\" label=\"线程\" align=\"center\"/>\r\n                <el-table-column prop=\"threadNum\" label=\"次数\" align=\"center\"/>\r\n                <el-table-column prop=\"targetpath\" label=\"目标地址\" align=\"center\"/>\r\n                <el-table-column prop=\"isTop\" label=\"是否加急\" align=\"center\"/>\r\n                <el-table-column\r\n                    fixed=\"right\"\r\n                    label=\"操作\"\r\n                    align=\"center\"\r\n                    width=\"100\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button @click=\"cancelClick(scope.row)\" type=\"text\" size=\"small\">取消</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n            <el-pagination\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"currentPage\"\r\n                :page-sizes=\"[10, 20, 30, 50]\"\r\n                :page-size=\"10\"\r\n                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                :total=\"total\">\r\n            </el-pagination>\r\n            <el-dialog title=\"添加任务\" :visible.sync=\"addVisible\" width=\"500px\">\r\n                <el-form :model=\"form1\">\r\n                    <el-form-item label=\"链接\" >\r\n                        <el-input v-model=\"form1.url\" autocomplete=\"off\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"任务类型\" >\r\n                    <el-select v-model=\"form1.type\" placeholder=\"请选择任务类型\">\r\n                        <el-option label=\"全套\" value=\"QUANTAO\"></el-option>\r\n                        <el-option label=\"点赞\" value=\"DAINZAN\"></el-option>\r\n                        <el-option label=\"评论\" value=\"PINGLUN\"></el-option>\r\n                        <el-option label=\"转发\" value=\"ZHUANFA\"></el-option>\r\n                        <el-option label=\"转发点赞\" value=\"ZHUANFA_DIANZAN\"></el-option>\r\n                    </el-select>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"线程数\" >\r\n                        <el-input v-model=\"form1.xcs\" autocomplete=\"off\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"次数\" >\r\n                        <el-input v-model=\"form1.cs\" autocomplete=\"off\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"加急\" >\r\n                    <el-select v-model=\"form1.jj\" placeholder=\"请选择\">\r\n                        <el-option label=\"是\" value=\"true\"></el-option>\r\n                        <el-option label=\"否\" value=\"false\"></el-option>\r\n                    </el-select>\r\n                    </el-form-item>\r\n                </el-form>\r\n                <span slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button type=\"primary\" @click=\"sure1\">确 定</el-button>\r\n                    <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n                </span>\r\n            </el-dialog>\r\n            <el-dialog title=\"批量添加任务\" :visible.sync=\"batchAddVisible\" width=\"500px\">\r\n                <el-form :model=\"form2\">\r\n                    <el-form-item label=\"任务名称\" >\r\n                    <el-input v-model=\"form2.name\" autocomplete=\"off\"></el-input>\r\n                    </el-form-item>\r\n                </el-form>\r\n                <span slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button type=\"primary\" @click=\"sure2\">确 定</el-button>\r\n                    <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n                </span>\r\n            </el-dialog>\r\n        </div>\r\n    </layout>\r\n</template>\r\n<script>\r\nimport layout from '@/components/layout-page.vue'\r\nimport { taskQuery, querytoday} from '@/api/request'\r\n\r\nexport default ({\r\n    components: {\r\n        layout\r\n    },\r\n    data() {\r\n      return {\r\n        currentPage: 1,\r\n        pagesize: 10,\r\n        total: 10,\r\n        todayTaskNum: 0,\r\n        addVisible: false,\r\n        batchAddVisible: false,\r\n        form1: {\r\n            url: '',\r\n            type: '',\r\n            xcs: '',\r\n            cs: '',\r\n            jj: '否'\r\n        },\r\n        form2: {\r\n            name: '',\r\n            region: '',\r\n        },\r\n        tableData: []\r\n      }\r\n    },\r\n    methods: {\r\n        handleSizeChange() {},\r\n        handleCurrentChange(page) {\r\n            this.currentPage = page\r\n            this.query()\r\n        },\r\n        query() {\r\n            const form = new FormData()\r\n            form.append('username_login', localStorage.getItem('username'))\r\n            form.append('password_login', localStorage.getItem('password'))\r\n            form.append('pagenum', this.currentPage)\r\n            form.append('pagesize', this.pagesize)\r\n            taskQuery(form).then((res) => {\r\n                if(res && res.ok === 1) {\r\n                  this.tableData = res.data.data.map(item => {\r\n                    item.isTop = item.isTop === true ? '是' : '否'\r\n                    item.isCanceled = item.isCanceled === true ? '是' : '否'\r\n                    return item\r\n                  })\r\n                  this.total = res.data.total\r\n                } \r\n            })\r\n        },\r\n        queryToday() {\r\n            const form = new FormData()\r\n            form.append('username_login', localStorage.getItem('username'))\r\n            form.append('password_login', localStorage.getItem('password'))\r\n            querytoday(form).then((res) => {\r\n                if(res && res.ok === 1) {\r\n                    this.todayTaskNum = res.data\r\n                } \r\n            })\r\n        },\r\n        add() {\r\n            this.addVisible = true\r\n        },\r\n        batchAdd() {\r\n            this.batchAddVisible = true\r\n        },\r\n        cancelClick(row) {\r\n            const form = new FormData()\r\n            form.append('username_login', localStorage.getItem('username'))\r\n            form.append('password_login', localStorage.getItem('password'))\r\n            form.append('missionid', row.missionid)\r\n            querytoday(form).then((res) => {\r\n                if(res && res.ok === 1) {\r\n                    console.log(res);\r\n                } \r\n            })\r\n        },\r\n        sure1() {},\r\n        sure2() {},\r\n    },\r\n    mounted() {\r\n        this.query()\r\n        this.queryToday()\r\n    },\r\n})\r\n</script>\r\n<style scoped>\r\n.el-table {\r\n    margin-top: 15px;\r\n}\r\n.el-pagination {\r\n    margin-top: 15px;\r\n    float: right;\r\n}\r\n.el-input__inner{\r\n    width: 220px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}